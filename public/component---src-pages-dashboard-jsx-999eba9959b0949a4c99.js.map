{"version":3,"sources":["webpack:///./src/components/Team/CreateTeam.js","webpack:///./src/components/Tutorial/TutorialFinal.js","webpack:///./src/pages/dashboard.jsx"],"names":["CreateTeam","camera","setCamera","useState","streaming","setStreaming","width","setWidth","height","setHeight","cameraRef","useRef","canvasRef","videoRef","photoRef","takePhotoRef","finalImageRef","clearPicture","current","context","getContext","fillStyle","fillRect","offsetHeight","offsetWidth","data","toDataURL","setAttribute","useEffect","async","stream","navigator","mediaDevices","getUserMedia","video","audio","srcObject","addEventListener","play","err","console","error","videoHeight","videoWidth","isNaN","getVideoStream","React","createElement","id","className","onClick","e","onKeyDown","src","ref","alt","action","type","name","placeholder","drawImage","preventDefault","takePicture","TutorialFinal","dispatch","useDispatch","tutorial","useSelector","tutorialSelector","step","stepSelector","currentStep","setCurrentStep","Fragment","Explanation","explainer","Button","nextStep","pushStep","nextTutorial","DashboardPage","windows","setWindows","open","invisible","selected","left","top","NoSSR","Layout","map","window","i","key","Window","Globe","SEO","title","Head"],"mappings":"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","file":"component---src-pages-dashboard-jsx-999eba9959b0949a4c99.js","sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport \"./CreateTeam.css\";\n\nconst CreateTeam = () => {\n    const [camera, setCamera] = useState(false);\n    const [streaming, setStreaming] = useState(false);\n    const [width, setWidth] = useState(null);\n    const [height, setHeight] = useState(null);\n    const cameraRef = useRef(null);\n    const canvasRef = useRef(null);\n    const videoRef = useRef(null);\n    const photoRef = useRef(null);\n    const takePhotoRef = useRef(null);\n    const finalImageRef = useRef(null);\n\n    const getVideoStream = async () => {\n        try {\n            clearPicture();\n            const stream = await navigator.mediaDevices.getUserMedia({ video: true, audio: false });\n            if (videoRef && videoRef.current) {\n                videoRef.current.srcObject = stream;\n                videoRef.current.addEventListener(\"loadedmetadata\", () => {\n                    videoRef.current.play();\n                });\n            } else {\n                return;\n            }\n        } catch (err) {\n            console.error(err)\n        }\n        \n        if (videoRef && videoRef.current) {\n            videoRef.current.addEventListener(\"canplay\", () => {\n                if (!streaming) {\n                    setHeight(videoRef.current.videoHeight / (videoRef.current.videoWidth / width));\n\n                    // Firefox currently has a bug where the height can't be read from\n                    // the video, so we will make assumptions if this happens.\n\n                    if (isNaN(height)) {\n                        setHeight(width / (4 / 3));\n                    }\n\n                    videoRef.current.setAttribute(\"width\", width);\n                    videoRef.current.setAttribute(\"height\", height);\n                    canvasRef.current.setAttribute(\"width\", width);\n                    canvasRef.current.setAttribute(\"height\", height);\n                    setStreaming(true);\n                }\n            }, false);\n        }\n    }\n\n    function clearPicture() {\n        if (canvasRef && canvasRef.current && photoRef && photoRef.current) {\n            const context = canvasRef.current.getContext(\"2d\");\n            context.fillStyle = \"#000\";\n            context.fillRect(0, 0, canvasRef.current.offsetHeight, canvasRef.current.offsetWidth);\n\n            const data = canvasRef.current.toDataURL(\"image/png\");\n            photoRef.current.setAttribute(\"src\", data);\n        }\n    }\n\n    const takePicture = (e) => {\n        if (canvasRef && canvasRef.current && photoRef && photoRef.current && videoRef && videoRef.current && finalImageRef && finalImageRef.current) {\n            const context = canvasRef.current.getContext(\"2d\");\n            if (width && height) {\n                canvasRef.current.width = width;\n                canvasRef.current.height = height;\n                context.drawImage(videoRef.current, 0, 0, width, height);\n\n                const data = canvasRef.current.toDataURL(\"image/png\");\n                photoRef.current.setAttribute(\"src\", data);\n                finalImageRef.current.setAttribute(\"src\", data);\n            } else {\n                clearPicture();\n            }\n        }\n        e.preventDefault();\n    }\n\n    useEffect(() => {\n        camera && getVideoStream();\n    }, [camera]);\n\n    useEffect(() => {\n        setWidth(200);\n    }, []);\n\n    return (\n        <div id=\"createTeam\">\n            <h1>Create Team</h1>\n            <p>\n                You are now going to work in a group of 3 students to unmask the hacker.\n            </p>\n            <div className=\"teamImage\" onClick={(e) => { setCamera(true) }} onKeyDown={(e) => { setCamera(true) }}>\n                <img src=\"https://via.placeholder.com/150\" ref={finalImageRef} alt=\"Team\" />\n            </div>\n            <form action=\"/api/new-team\">\n                <input type=\"hidden\" id=\"image\" name=\"image\" />\n                <input type=\"text\" id=\"teamName\" placeholder=\"Team naam\" />\n                <input type=\"text\" id=\"klas\" name=\"klas\" placeholder=\"Klas\" />\n                <div>\n                    <label>\n                        <span>Student 1</span>\n                        <input className=\"half\" type=\"text\" id=\"student1\" name=\"student1\" placeholder=\"Student voornaam\" />\n                    </label>\n                    <input className=\"half\" type=\"text\" placeholder=\"Student nummer\" />\n                </div>\n                <div>\n                    <label>\n                        <span>Student 2</span>\n                        <input className=\"half\" type=\"text\" id=\"student2\" name=\"student2\" placeholder=\"Student voornaam\" />\n                    </label>\n                    <input className=\"half\" type=\"text\" placeholder=\"Student nummer\" />\n                </div>\n                <div>\n                    <label>\n                        <span>Student 3</span>\n                        <input className=\"half\" type=\"text\" id=\"student3\" name=\"student3\" placeholder=\"Student voornaam\" />\n                    </label>\n                    <input className=\"half\" type=\"text\" placeholder=\"Student nummer\" />\n                </div>\n                <div className=\"buttonWrapper\">\n                    <button type=\"button\" className=\"btn\"><span>Create team</span></button>\n                </div>\n            </form>\n            {camera && (\n                <div className=\"camera\" ref={cameraRef}>\n                    <video ref={videoRef} id=\"video\">Video stream not available.</video>\n                    <div className=\"buttonWrapper\">\n                        <button onClick={(e) => { takePicture(e) }} ref={takePhotoRef} type=\"button\" id=\"startbutton\" className=\"btn\"><span>Take photo</span></button>\n                        <button onClick={() => { setCamera(false) }} type=\"button\" id=\"savebutton\" className=\"btn\"><span>Save photo</span></button>\n                    </div>\n                    <div className=\"output\">\n                        <div className=\"imgWrapper\">\n                            <img ref={photoRef} id=\"photo\" alt=\"Team image\" />\n                        </div>\n                        <canvas id=\"canvas\" ref={canvasRef} />\n                    </div>\n                </div>\n            )}\n        </div>\n    )\n}\n\nexport default CreateTeam;","import React, { useState, useEffect } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport Explanation from \"./../Explanation/Explanation\";\nimport Button from \"./../Button/Button\";\n\nimport { nextStep, pushStep, nextTutorial, tutorialSelector, stepSelector } from \"../../state/tutorial\";\n\nconst TutorialFinal = () => {\n    const dispatch = useDispatch();\n    const totalSteps = 2;\n    const tutorial = useSelector(tutorialSelector) === \"tutorialFinal\";\n    const step = useSelector(stepSelector);\n\n    const [currentStep, setCurrentStep] = useState(step);\n\n    useEffect(() => {\n        setCurrentStep(step);\n    }, [tutorial, step]);\n\n    const next = () => {\n        if (currentStep < totalSteps) {\n            setCurrentStep(currentStep + 1);\n            dispatch(nextStep());\n        }\n    }\n\n    const close = () => {\n        dispatch(pushStep(1));\n        dispatch(nextTutorial());\n    }\n\n    return (\n        <>\n            {tutorial && (\n                <Explanation explainer=\"agent\">\n                    {currentStep === 1 && (\n                        <>\n                            <h1>Agent X:</h1>\n                            <p>\n                                Mooi werk, agent. Je hebt de introductie succesvol doorlopen. Laat je docent weten dat je klaar bent.\n                            </p>\n                        </>\n                    )}\n                    {currentStep === 2 && (\n                        <>\n                            <h1>Agent X:</h1>\n                            <p>\n                                Je gaat nu in een groep van 3 studenten aan de slag om de hacker te ontmaskeren. Wacht tot de volgende twee studenten klaar zijn met de introductie en klik vervolgens op \"Create Team\".\n                            </p>\n                        </>\n                    )}\n                    {currentStep < totalSteps && (\n                        <Button className=\"tutorialButton\" onClick={() => { next() }}>Volgende</Button>\n                    )}\n                    {currentStep === totalSteps && (\n                        <Button className=\"tutorialButton\" onClick={() => { close() }}>Sluiten</Button>\n                    )}\n                </Explanation>\n            )}\n        </>\n    )\n}\n\nexport default TutorialFinal;","import React, { useState } from 'react';\nimport NoSSR from '../components/NoSSR/NoSSR';\nimport Window from \"../components/Window/Window\";\nimport Globe from \"../components/Globe/GlobeComp\";\nimport CreateTeam from \"../components/Team/CreateTeam\";\nimport Layout from \"../components/Layout\";\nimport SEO from \"../components/SEO\";\nimport TutorialFinal from \"../components/Tutorial/TutorialFinal\";\n\nconst DashboardPage = () => {\n    const [windows, setWindows] = useState([\n        { name: \"CreateTeam\", open: false, invisible: false, selected: false, left: 20, top: 20 },\n        { name: \"SateliteView\", open: false, invisible: false, selected: false, left: 60, top: 60 }\n    ]);\n\n    return (\n        <NoSSR>\n            <Layout\n                windows={windows}\n                setWindows={setWindows}\n            >\n                {windows.map((window, i) => (\n                    <div key={`window${i}`}>\n                        {window.open && (\n                            <Window\n                                window={window}\n                                windows={windows}\n                                setWindows={setWindows}\n                            >\n                            {window.name === \"SateliteView\" && (\n                                <Globe />\n                            )}\n                            {window.name === \"CreateTeam\" && (\n                                <CreateTeam />\n                            )}\n                            </Window>\n                        )}\n                    </div>\n                ))}    \n                <SEO title=\"Dashboard\" />\n                <TutorialFinal />\n            </Layout>\n        </NoSSR>\n    );\n}\n\nexport default DashboardPage;\n\nexport const Head = () => <title>Interpol - Dashboard</title>"],"sourceRoot":""}